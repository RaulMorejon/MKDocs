<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Sprint 4 - Raúl Morejón</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Sprint 4";
        var mkdocs_page_input_path = "sprint4.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Raúl Morejón
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Inici</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Sprints</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../sprint1/">Sprint 1</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sprint2/">Sprint 2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sprint3/">Sprint 3</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Sprint 4</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#1-monitoritzacio">1. MONITORITZACIÓ</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#2-administracio-remota-team-viewer">2. ADMINISTRACIÓ REMOTA (TEAM VIEWER)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#3-llicenciament">3. LLICENCIAMENT</a>
    </li>
    </ul>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../permisos/">Polítiques d'ús i contacte</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Raúl Morejón</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Sprints</li>
      <li class="breadcrumb-item active">Sprint 4</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="monitoritzacio-connexio-remota-i-llicenciament">Monitorització, connexió remota i llicenciament</h1>
<p>Aquest sprint se centra en la monitorització del sistema, la connexió remota i la gestió de llicències a Linux. La monitorització permet supervisar el rendiment i l'estat dels recursos del sistema, la connexió remota facilita l'administració segura dels servidors a distància, i el llicenciament garanteix el compliment de les polítiques d'ús i distribució del programari.</p>
<h2 id="1-monitoritzacio">1. MONITORITZACIÓ</h2>
<p>Els <strong>logs</strong> són registres del sistema i aplicacions que documenten esdeveniments, errors i activitats per a la monitorització i seguretat. Es gestionen seguint normes com la <strong>rotació, classificació per gravetat i retenció</strong>. <strong>journalctl</strong> permet consultar logs en <strong>systemd</strong>, amb opcions per veure registres en temps real o filtrar per servei. La seva utilitat principal és <strong>monitoritzar un servidor, detectar problemes i millorar la seguretat i rendiment</strong>.</p>
<p>Primer de tot anem a <strong><code>/var/log</code></strong> on s'emmagatzema els <strong>logs del sistema i aplicacions</strong> a Linux. Conté registres com <strong><code>syslog</code> (esdeveniments), <code>auth.log</code> (autenticació), <code>kern.log</code> (nucli), <code>dmesg</code> (arrencada)</strong> i logs de servidors web. És clau per <strong>diagnosticar problemes i monitoritzar el sistema</strong>.</p>
<p><img alt="alt text" src="../4.0.png" /></p>
<p>Si accedim a <strong><code>logrotate.conf</code></strong> podem veure que es on es configura <strong>Logrotate</strong>, que gestiona la <strong>rotació, compressió i eliminació automàtica dels logs</strong>. Permet definir la <strong>freqüència</strong>, el <strong>nombre de logs a conservar</strong>, la <strong>compressió</strong> i accions abans/després de la rotació. Les configuracions específiques es troben a <code>/etc/logrotate.d/</code>**.</p>
<p><img alt="alt text" src="../4.1.png" /></p>
<p>Si anem a <strong><code>/var/log/ufw.log</code></strong> trobem que és sotmès a la <strong>rotació de logs</strong> per controlar l'espai en disc. <strong>Logrotate</strong> arxiva, comprimeix i gestiona els logs antics, mantenint-los organitzats sense saturar el sistema. La configuració es troba a <strong><code>/etc/logrotate.d/ufw</code></strong>.</p>
<p><img alt="alt text" src="../4.2.png" /></p>
<p>Si volem veure els registres dels esdeveniments em d'anar al <strong><code>syslog</code></strong> ja que és un sistema on es recopila l'informació del sistema, nucli, serveis i aplicacions. Els logs es poden veure a <strong><code>/var/log/syslog</code></strong> i es poden filtrar per cercar errors o advertències.</p>
<p><img alt="alt text" src="../4.4.png" /></p>
<p>En el <strong><code>syslog.conf</code></strong> tobem la configuració de <strong>syslog</strong>, on es defineixen les regles per gestionar els registres d'esdeveniments. Específica la <strong>prioritat dels missatges</strong> i la <strong>destinació</strong> on s'emmagatzemen, com a fitxers locals o serveis remots. Per aplicar canvis s'ha de reiniciar el servei <strong>rsyslog</strong>.</p>
<p><img alt="alt text" src="../4.5.png" /></p>
<p>També trobem el fitxer <strong><code>50-default.conf</code></strong> a <strong><code>/etc/logrotate.d/</code></strong> que configura la <strong>rotació de logs</strong> per a serveis del sistema. Defineix com es gestionen els logs, incloent la <strong>freqüència de rotació</strong>, la <strong>conservació dels logs antics</strong> i la <strong>compressió</strong>. </p>
<p>Aquestes configuracions eviten que els registres d'aquests serveis específics es guardin en l'arxiu de logs especificat.</p>
<p><img alt="alt text" src="../4.6.png" /></p>
<p>En aquest punt mantenim obert els logs actual pero veure els canvis a d'alt. Seguidament crearem el <strong>logs</strong></p>
<p>Per crear un <strong>log</strong> utilitzarem la comanda <strong><code>logger -i -s -p</code></strong> que permet registrar missatges en els logs del sistema amb les següents opcions:</p>
<ul>
<li><strong><code>-i</code></strong>: Inclou l'<strong>ID de procés (PID)</strong> al missatge.</li>
<li><strong><code>-s</code></strong>: Mostra el missatge també per <strong>pantalla</strong>.</li>
<li><strong><code>-p</code></strong>: Defineix la <strong>prioritat</strong> del missatge (categoria i nivell de severitat).</li>
</ul>
<p>Exemple: <strong><code>logger -i -s -p mail.err "Missatge"</code></strong> registrarà el missatge amb prioritat <strong><code>mail.err</code></strong>, incloent el PID i mostrant-lo a la pantalla. I es pot veure que surt al <strong><code>/var/logs/syslog</code></strong></p>
<p><img alt="alt text" src="../4.7.png" /></p>
<p>La frase corregida seria:</p>
<p>Si accedim als logs de <strong><code>mail.log</code></strong>, trobarem el log que acabem de crear amb el <strong>missatge</strong>, ja que estava definit que es redirigís a aquest fitxer de logs. </p>
<p><img alt="alt text" src="../4.8.png" /></p>
<p>També Si es posa <strong><code>mail.=alert</code></strong> al fitxer <strong><code>50-default.conf</code></strong>, només es registraran els missatges del servei de <strong>mail</strong> amb <strong>prioritat <code>alert</code></strong> o més alta, indicant situacions que requereixen atenció immediata. Els missatges de menor severitat seran ignorats. Igual amb la <strong>prioritat <code>crit</code></strong> que es redireccionaran al <code>/var/log/mail.log</code></p>
<p><img alt="alt text" src="../4.9.png" /></p>
<p>Per fer un exemple farem el mateix pero cambiarem per a que totes les <strong>prioritats amb <code>*.crit</code> més altes</strong> es redireccionin a <code>/var/log/raul.log</code></p>
<p><img alt="alt text" src="../4.15.png" /></p>
<p>Creem un log amb la <strong>prioritat <code>emerg</code></strong> i ara si anem al <code>/var/log/mail.log</code> veurem que no esta aquest log (mirant el seu PID), però si anem a <code>/var/log/raul.log</code> si el trobarem ja que es de prioritat mes alta.</p>
<p><img alt="alt text" src="../4.16.png" /></p>
<hr />
<p>Per tindre-ho mes clar podem veure els nivells de prioritats en <strong>syslog</strong> es classifiquen en 8 nivells de severitat, de més baix a més alt:</p>
<ol>
<li><strong><code>debug</code></strong>: Informació detallada útil per a la depuració.</li>
<li><strong><code>info</code></strong>: Missatges informatius que indiquen el bon funcionament del sistema.</li>
<li><strong><code>notice</code></strong>: Missatges normals, però importants, per a l'operació del sistema.</li>
<li><strong><code>warning</code></strong>: Advertències de possibles problemes, però no crítiques.</li>
<li><strong><code>err</code></strong>: Errors que poden afectar el funcionament, però no són crítics.</li>
<li><strong><code>crit</code></strong>: Condicions crítiques que necessiten atenció immediata.</li>
<li><strong><code>alert</code></strong>: Problemes molt greus que requereixen una resposta immediata.</li>
<li><strong><code>emerg</code></strong>: Problemes crítics que impliquen una fallada total del sistema.</li>
</ol>
<p>Els missatges amb una prioritat més alta inclouen també els de prioritats més baixes.</p>
<hr />
<p>Amb el <strong><code>journalctl</code></strong> podem visualitzar i gestionar els registres del sistema guardats pel sistema de registre <strong><code>systemd</code></strong>. Ens permet consultar els logs del sistema de manera eficient, filtrar per data, servei o nivell de severitat, i veure missatges d'error, advertències, entre d'altres.</p>
<p>Per exemple podem filtrar per les <strong>prioritats <code>alert</code></strong>:</p>
<p><img alt="alt text" src="../4.17.png" /></p>
<p>I seguidament amb la comanda <strong><code>journalctl -u cron</code></strong> permet veure els registres del servei <strong><code>cron</code></strong> gestionats per <strong><code>systemd</code></strong>. El paràmetre <strong><code>-u</code></strong> indica que es volen mostrar els logs d'un <strong>servei específic</strong>. En aquest cas, es mostraran els missatges relacionats amb el servei de <strong>cron</strong>, que gestiona les tasques programades en el sistema:</p>
<p><img alt="alt text" src="../4.18.png" /></p>
<p><img alt="alt text" src="../4.19.png" /></p>
<h2 id="2-administracio-remota-team-viewer">2. ADMINISTRACIÓ REMOTA (TEAM VIEWER)</h2>
<h2 id="3-llicenciament">3. LLICENCIAMENT</h2>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../sprint3/" class="btn btn-neutral float-left" title="Sprint 3"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../permisos/" class="btn btn-neutral float-right" title="Polítiques d'ús i contacte">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../sprint3/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../permisos/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
